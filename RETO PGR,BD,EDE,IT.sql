CREATE DATABASE MEDIAMARTA;
USE MEDIAMARTA;

CREATE TABLE USER(
CODUSER INT AUTO_INCREMENT PRIMARY KEY ,
USERNAME VARCHAR(15),
PSW VARCHAR(15),
TYPE_U ENUM ("Client","Admin")
);
CREATE TABLE BRAND(
CODBRAND INT AUTO_INCREMENT PRIMARY KEY,
NAMEBRAND VARCHAR(15)
);
CREATE TABLE PRODUCT(
CODPRODUCT INT AUTO_INCREMENT PRIMARY KEY,
NAMEP VARCHAR(50),
TYPEP ENUM ("Mobile","Computer"),
PRICE DOUBLE,
STOCK DOUBLE,
CODBRAND INT,
FOREIGN KEY (CODBRAND) REFERENCES BRAND (CODBRAND)
);
CREATE TABLE PURCHASE (
CODPRODUCT INT,
CODUSER INT,
PRIMARY KEY (CODPRODUCT,CODUSER),
QUANTITY DOUBLE,
DATEP DATE,
FOREIGN KEY (CODPRODUCT) REFERENCES PRODUCT (CODPRODUCT),
FOREIGN KEY (CODUSER) REFERENCES USER (CODUSER)
);
CREATE TABLE COMPONENT (
CODCOMPONENT INT AUTO_INCREMENT PRIMARY KEY,
NAMECOMP VARCHAR(50),
TYPEC ENUM("Graphics","RAM","Processor"),
CODBRAND INT,
PRICECOMP DOUBLE,
FOREIGN KEY (CODBRAND) REFERENCES BRAND (CODBRAND)
);
CREATE TABLE CONTAIN (
CODPRODUCT INT,
CODCOMPONENT INT,
PRIMARY KEY(CODPRODUCT,CODCOMPONENT),
FOREIGN KEY (CODPRODUCT) REFERENCES PRODUCT (CODPRODUCT),
FOREIGN KEY (CODCOMPONENT) REFERENCES COMPONENT (CODCOMPONENT)
);
INSERT INTO USER 
VALUES 
	(1,"Paco","1234","Client"),
	(2,"Jagoba","4321","Admin"),
    (3,"Victor","4321","Admin"),
	(4,"Xabi","4321","Admin"),
	(5,"Alex","4321","Admin"),
    (6,"Pepe","1234","Client"),
    (7,"Felix","1234","Client");
      
INSERT INTO BRAND 
VALUES 
	(11,"Apple"),
    (12,"Samsung"),
    (13,"Lenovo"),
    (14,"Huawei"),
    (15,"ASUS"),
    (16,"INTEL");
    
INSERT INTO PRODUCT 
VALUES 
	(100,"Iphone X","Mobile",500,150,11),
    (101,"Samsung Galaxy Book 4","Computer",399,70,12),
    (102,"Lenovo IdeaPad Slim 3","Computer",700,300,13),
    (103,"Samsung Galaxy S24","Mobile",550,244,12),
    (104,"HUAWEI Pura 70 Pro","Mobile",1000,700,14);
    
INSERT INTO PURCHASE 
VALUES 
	(100,1,5,'2025-02-20'),
    (101,6,12,'2025-01-04'),
    (104,7,1,'2025-03-03'),
    (102,1,2,'2025-02-25');
    
INSERT INTO COMPONENT 
VALUES 
	(500,"Asus GT710","Graphics",15,81.99),
    (501,"Intel Core i5-13400","Processor",16,170),
    (502,"ESC 4000 G4X","RAM",15,110.99),
    (503,"OFFTEK 8GB","RAM",15,30),
    (504,"ASUS Dual RTX 4060 TI","Graphics",15,81.99),
	(505,"Ultra 9 285K","Processor",16,665);
    
INSERT INTO CONTAIN 
VALUES 
	(101,500),
    (102,505);